// 常见问题数据
export const mockFAQs = [
  {
    id: 1,
    title: '如何充值会员卡？',
    content: `## 充值方式

您可以通过以下方式充值会员卡：

1. **线上充值**
   - 进入"我的"页面
   - 点击"储值明细"
   - 选择充值金额并完成支付

2. **线下充值**
   - 前往门店前台
   - 告知工作人员需要充值
   - 使用现金或刷卡完成充值

## 注意事项

- 充值金额最低为 **50元**
- 充值后立即到账
- 如有疑问，请联系客服`,
    category: '充值相关',
    order: 1,
  },
  {
    id: 2,
    title: '优惠券如何使用？',
    content: `## 使用步骤

1. 在"我的"页面查看可用优惠券
2. 选择要使用的优惠券
3. 在结算时选择该优惠券
4. 系统自动抵扣相应金额

## 使用规则

- 优惠券有**有效期限制**，请在有效期内使用
- 部分优惠券有**使用门槛**，需满足最低消费金额
- 优惠券**不可叠加使用**
- 退款时优惠券**不退还**`,
    category: '优惠券',
    order: 2,
  },
  {
    id: 3,
    title: '如何查询订单？',
    content: `## 查询方式

### 方法一：通过小程序查询
1. 进入"我的订单"页面
2. 查看所有历史订单
3. 点击订单可查看详细信息

### 方法二：联系客服
- 提供订单号或手机号
- 客服将为您查询订单状态

## 订单状态说明

- **待支付**：订单已创建，等待支付
- **已支付**：订单已支付成功
- **已完成**：订单已完成服务
- **已取消**：订单已取消`,
    category: '订单相关',
    order: 3,
  },
  {
    id: 4,
    title: '会员等级如何升级？',
    content: `## 升级方式

会员等级通过**成长值**进行升级：

### 获取成长值
- 消费获得成长值：每消费 **1元 = 1成长值**
- 完成指定任务可获得额外成长值
- 参与活动可获得成长值奖励

### 等级说明

| 等级 | 所需成长值 | 权益 |
|------|-----------|------|
| 青铜 | 0-200 | 基础权益 |
| 黄铜 | 201-500 | 9.5折优惠 |
| 白银 | 501-1000 | 9折优惠 |
| 黄金 | 1001-2000 | 8.5折优惠 |
| 钻石 | 2000+ | 8折优惠 + 专属客服`,
    category: '会员权益',
    order: 4,
  },
]

// 将 FAQ 数据转换为 HTML 格式，用于富文本编辑器
export const getFAQsAsHTML = () => {
  return mockFAQs
    .sort((a, b) => a.order - b.order)
    .map(faq => {
      // 将 Markdown 格式转换为 HTML
      let htmlContent = faq.content
        // 处理标题
        .replace(/### (.*?)$/gm, '<h3>$1</h3>')
        .replace(/## (.*?)$/gm, '<h2>$1</h2>')
        // 处理粗体
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        // 处理列表项
        .replace(/^- (.*?)$/gm, '<li>$1</li>')
        .replace(/^\d+\. (.*?)$/gm, '<li>$1</li>')
        // 处理段落
        .split('\n\n')
        .map(para => {
          para = para.trim()
          if (para.startsWith('<h')) return para
          if (para.startsWith('<li>')) {
            // 将连续的 li 包装在 ul 中
            return '<ul>' + para.split('\n').join('') + '</ul>'
          }
          if (para) return '<p>' + para.replace(/\n/g, '<br>') + '</p>'
          return ''
        })
        .join('')
      
      return `<h1>${faq.title}</h1>${htmlContent}<br>`
    })
    .join('<hr><br>')
}

